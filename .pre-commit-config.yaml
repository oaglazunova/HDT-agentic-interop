repos:
  - repo: local
    hooks:
      - id: pytest-quick
        name: pytest (quick)
        entry: python -m pytest --maxfail=1 --disable-warnings -q --cov-config=.coveragerc --cov=hdt_mcp --cov=hdt_core_infrastructure --cov=hdt_sources_mcp --cov-report=term --cov-fail-under=85
        language: python
        pass_filenames: false
        additional_dependencies:
          - pytest
          - pytest-cov
          - pytest-asyncio
          - python-dotenv
          - requests
          - mcp>=1.24,<2

      - id: smoke-mcp
        name: smoke_mcp (manual)
        entry: python scripts/smoke_mcp.py
        language: python
        pass_filenames: false
        stages: [manual]
        additional_dependencies:
          - mcp>=1.24,<2
          - python-dotenv

default_language_version:
  python: python
