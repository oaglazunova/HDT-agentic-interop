[run]
branch = True
source =
    hdt_api
    hdt_mcp

# Omit integration adapters, thin shims, and non-core assets from quick-hook coverage
omit =
    # Provider adapters/parsers (exercise with integration tests, not unit tests)
    hdt_api/GAMEBUS_*_fetch.py
    hdt_api/GAMEBUS_*_parse.py
    hdt_api/GOOGLE_FIT_*_fetch.py
    hdt_api/GOOGLE_FIT_*_parse.py

    # Compatibility shims / glue modules
    hdt_api/*
    hdt_mcp/hdt_api.py
    validation.py

    # Demo/CLI/scripts, docs, and models outside core runtime
    scripts/*
    docs/*
    Virtual_Twin_Models/*

    # Heavy façade measured in CI separately
    hdt_mcp/policy.py
    hdt_mcp/reduction.py
    hdt_mcp/server.py

    # Heavy Flask façade (quick-run omits; still measured in CI)
    hdt_api/app.py
    hdt_api\\app.py

    # Additional low-signal modules omitted for quick pre-commit scope
    # (integration/edge-heavy; still measured in full CI as desired)
    hdt_api/auth.py
    hdt_api\\auth.py
    hdt_api/hdt_api_fetchers.py
    hdt_api\\hdt_api_fetchers.py
    hdt_api/hdt_api_utils.py
    hdt_api\\hdt_api_utils.py

[report]
exclude_lines =
    # Don't complain about defensive code or no-cover markers
    pragma: no cover
    if __name__ == .__main__.
    except Exception:
    except:
    raise NotImplementedError

show_missing = True
